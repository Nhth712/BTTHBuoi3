<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <title>Kiểm tra phản xạ</title>
    <style type="text/css">
    body {
      font-family: sans-serif;
      color: white;
      background: linear-gradient(to right, #8e9eab, #eef2f3); /Edge
    }

    #shape {
        width: 170px;
        height: 170px;
        background-color: rgb(43, 0, 255);
        display: none;
        position: relative;
    }
    </style>
  </head>
    <body>
        <h1>Trò chơi chọn nhanh (kiểm tra phản xạ)</h1>
        <p>Hãy bấm vào hình xuất hiện phía dưới nhanh nhất mà bạn có thể.</p>
        <p>Thời gian phản xạ của bạn:  <span id="timeTaken"></span></p>
        <p style="font-weight: bold;">Thời gian ghi nhận: <span id="timer"></span></p>
        <p style="font-weight: bold;">Thời gian nhanh nhất: <span id="best-time"></span></p>  
        <div id="shape" style="border-radius: 0px; background-color: rgb(15, 224, 235); width: 144.296px; height: 144.296px; top: 33.5548px; left: 362.703px; display: block;"></div>    
      <audio controls>
        <source src="horse.ogg" type="audio/ogg">
        <source src="horse.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
      </audio>  
      <script type="text/javascript">
          var containerWidth, containerHeight;
          var timerElement = document.getElementById('timer');
      
          function getRandomPosition() {
            var centerX = containerWidth / 2;
            var centerY = containerHeight / 2;
            var radius = 100; 
          
            var angle = Math.random() * Math.PI * 2;
            var distance = Math.random() * radius;
            
            var x = centerX + Math.cos(angle) * distance - 50; 
            var y = centerY + Math.sin(angle) * distance - 50;
          
            return { x: x, y: y };
          }
          
          function generateRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
              color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
          }
      
          function getRandomShape() {
            var shapes = ['square', 'rectangle', 'triangle'];
            var randomIndex = Math.floor(Math.random() * shapes.length);
            return shapes[randomIndex];
          }
      
          function createBlock() {
            var block = document.createElement('div');
            block.className = 'block ' + getRandomShape();
            block.style.backgroundColor = generateRandomColor();
      
            var position = getRandomPosition();
            block.style.left = position.x + 'px';
            block.style.top = position.y + 'px';
      
            block.addEventListener('click', handleBlockClick);
            return block;
          }
      
          function handleBlockClick() {
            var block = event.target;
            var endTime = new Date();
            var timeDiff = endTime - startTime;
            timerElement.textContent = timeDiff + 'ms';
      
            block.parentNode.removeChild(block);
            gameContainer.appendChild(createBlock());
            startTime = new Date();
          }
      
          var shortestTime = Infinity; 
          var bestTimeElement = document.getElementById('best-time'); 
      
          function handleBlockClick() {
            var block = event.target;
            var endTime = new Date();
            var timeDiff = endTime - startTime;
            timerElement.textContent = timeDiff + 'ms';
          
            if (timeDiff < shortestTime) {
              shortestTime = timeDiff;
              bestTimeElement.textContent = shortestTime + 'ms';
            }
          
            var audio = new Audio('/BT_BUOI8/AUDIO/pop.mp3'); 
            audio.play();
          
            block.parentNode.removeChild(block);
            gameContainer.appendChild(createBlock());
            startTime = new Date();
          }
      
          var gameContainer = document.getElementById('game-container');
      
          var containerRect = gameContainer.getBoundingClientRect();
          containerWidth = containerRect.width;
          containerHeight = containerRect.height;
      
          var startTime = new Date();
          gameContainer.appendChild(createBlock());
        </script>
    </body>
</html>
